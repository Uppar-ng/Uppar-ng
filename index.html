<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="theme-color" content="#0066FF">
    <title>Primer â€¢ Smart Services</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        /* === CSS VARIABLES & THEMING === */
        :root {
            /* Light Theme - White and Blue only */
            --primary: #0066FF;
            --primary-light: #E6F0FF;
            --primary-dark: #0052CC;
            
            --bg-primary: #FFFFFF;
            --bg-secondary: #F8FAFC;
            --bg-card: #FFFFFF;
            --bg-modal: #FFFFFF;
            --bg-nav: rgba(255, 255, 255, 0.95);
            
            --text-primary: #111827;
            --text-secondary: #6B7280;
            --text-muted: #9CA3AF;
            
            --border-light: #E5E7EB;
            --border-medium: #D1D5DB;
            
            --success: #10B981;
            --warning: #F59E0B;
            --error: #EF4444;
            --info: #3B82F6;
            
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 14px;
            --radius-xl: 18px;
            --radius-full: 9999px;
            
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 250ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        [data-theme="dark"] {
            /* Dark Theme - Keep blue theme */
            --bg-primary: #0F172A;
            --bg-secondary: #1E293B;
            --bg-card: #1E293B;
            --bg-modal: #1E293B;
            --bg-nav: rgba(30, 41, 59, 0.95);
            
            --text-primary: #F1F5F9;
            --text-secondary: #CBD5E1;
            --text-muted: #94A3B8;
            
            --border-light: #334155;
            --border-medium: #475569;
        }

        /* === BASE STYLES === */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html {
            font-size: 18px;
            -webkit-text-size-adjust: 100%;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            max-width: 100%;
            margin: 0 auto;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            transition: background-color var(--transition-base);
        }

        /* === RESPONSIVE BREAKPOINTS === */
        @media (max-width: 768px) {
            html { font-size: 16px; }
        }

        @media (max-width: 480px) {
            html { font-size: 15px; }
        }

        @media (min-width: 1024px) {
            body {
                max-width: 500px;
                margin: 0 auto;
                box-shadow: 0 0 0 1px var(--border-light);
            }
        }

        /* === LOADING SCREEN === */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--bg-primary);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 9999;
            transition: opacity var(--transition-base);
        }

        .loading-logo {
            width: 80px;
            height: 80px;
            margin-bottom: 1.5rem;
            border-radius: var(--radius-lg);
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .loader {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border-light);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 1rem;
        }

        /* === PROMOTION BANNER === */
        .promo-banner {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 0.875rem 1rem;
            margin: 1rem;
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            box-shadow: var(--shadow-md);
            transition: all var(--transition-base);
        }

        .promo-banner:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .promo-icon {
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
        }

        .promo-content h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .promo-content p {
            font-size: 0.8125rem;
            opacity: 0.9;
        }

        /* === BOTTOM UP MODAL === */
        .bottom-modal {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-modal);
            border-radius: var(--radius-xl) var(--radius-xl) 0 0;
            z-index: 2000;
            padding: 1rem 1rem 2rem;
            transform: translateY(100%);
            transition: transform var(--transition-slow) cubic-bezier(0.32, 0.72, 0, 1);
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.1);
            max-height: 85vh;
            overflow-y: auto;
            max-width: 500px;
            margin: 0 auto;
        }

        .bottom-modal.active {
            transform: translateY(0);
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1999;
            opacity: 0;
            transition: opacity var(--transition-base);
            pointer-events: none;
        }

        .modal-backdrop.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-light);
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            background: var(--bg-secondary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .modal-close:hover {
            background: var(--border-light);
        }

        /* === CUSTOM ALERTS & MODALS === */
        .alert-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3000;
            padding: 1rem;
            animation: fadeIn 0.2s ease;
        }

        .alert-modal {
            background: var(--bg-modal);
            border-radius: var(--radius-lg);
            width: 100%;
            max-width: 320px;
            padding: 1.5rem;
            box-shadow: var(--shadow-xl);
            animation: slideDown 0.3s ease;
        }

        .alert-icon {
            width: 48px;
            height: 48px;
            border-radius: var(--radius-full);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 1rem;
            font-size: 1.5rem;
        }

        .alert-icon.success {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .alert-icon.warning {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .alert-icon.error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .alert-icon.info {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .alert-title {
            font-size: 1.125rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .alert-message {
            color: var(--text-secondary);
            text-align: center;
            font-size: 0.875rem;
            line-height: 1.5;
            margin-bottom: 1.5rem;
        }

        .alert-actions {
            display: flex;
            gap: 0.75rem;
        }

        .alert-btn {
            flex: 1;
            padding: 0.75rem;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 0.875rem;
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .alert-btn.primary {
            background: var(--primary);
            color: white;
        }

        .alert-btn.secondary {
            background: var(--bg-secondary);
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        /* === SIGNUP MODAL === */
        .signup-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            padding: 1rem;
            animation: fadeIn 0.3s ease;
        }

        .signup-modal {
            background: var(--bg-modal);
            border-radius: var(--radius-xl);
            width: 100%;
            max-width: 400px;
            padding: 1.5rem;
            box-shadow: var(--shadow-xl);
            animation: slideUp 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }

        .signup-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .signup-header .logo-placeholder {
            height: 60px;
            width: 60px;
            margin-bottom: 1rem;
            border-radius: var(--radius-md);
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1rem;
        }

        .signup-header h2 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .signup-header p {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.5;
        }

        /* === FORM ELEMENTS === */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 0.375rem;
            color: var(--text-primary);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            font-size: 0.9375rem;
            font-family: inherit;
            color: var(--text-primary);
            transition: all var(--transition-fast);
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(0, 102, 255, 0.1);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .custom-select {
            position: relative;
        }

        .select-input {
            width: 100%;
            padding: 0.75rem;
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            font-size: 0.9375rem;
            font-family: inherit;
            color: var(--text-primary);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .select-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--bg-modal);
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            margin-top: 0.25rem;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            max-height: 250px;
            overflow-y: auto;
            display: none;
        }

        .select-dropdown.active {
            display: block;
            animation: slideDown 0.2s ease;
        }

        .select-option {
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-light);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .select-option:hover {
            background: var(--bg-secondary);
        }

        .select-option.selected {
            background: var(--primary-light);
            color: var(--primary);
            font-weight: 600;
        }

        /* === BUTTONS === */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.75rem 1.25rem;
            border-radius: var(--radius-md);
            font-size: 0.875rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all var(--transition-fast);
            font-family: inherit;
            text-decoration: none;
            gap: 0.5rem;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-outline {
            background: transparent;
            color: var(--text-primary);
            border: 1px solid var(--border-light);
        }

        .btn-outline:hover {
            background: var(--bg-secondary);
            border-color: var(--border-medium);
        }

        .btn-sm {
            padding: 0.5rem 0.75rem;
            font-size: 0.75rem;
        }

        .btn-full {
            width: 100%;
        }

        /* === HEADER === */
        .app-header {
            background: var(--bg-card);
            padding: 1rem;
            border-bottom: 1px solid var(--border-light);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .header-logo {
            height: 36px;
            width: 36px;
            border-radius: var(--radius-sm);
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .header-info h1 {
            font-size: 1.125rem;
            font-weight: 700;
            margin-bottom: 0.125rem;
        }

        .header-info p {
            font-size: 0.75rem;
            color: var(--text-secondary);
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .icon-btn {
            width: 36px;
            height: 36px;
            border-radius: var(--radius-md);
            background: var(--bg-secondary);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .icon-btn:hover {
            background: var(--border-light);
        }

        /* === MAIN CONTENT === */
        .main-content {
            padding-bottom: 70px;
        }

        /* === HERO SECTION === */
        .hero-section {
            padding: 1.5rem 1rem;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero-section::before {
            content: '';
            position: absolute;
            top: -50px;
            right: -50px;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }

        .hero-title {
            font-size: 1.625rem;
            font-weight: 800;
            margin-bottom: 0.5rem;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-size: 0.9375rem;
            opacity: 0.9;
            margin-bottom: 1rem;
            line-height: 1.5;
        }

        /* === SERVICES SECTION === */
        .services-section {
            padding: 1.5rem 1rem;
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .section-link {
            font-size: 0.8125rem;
            color: var(--primary);
            font-weight: 600;
            text-decoration: none;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }

        @media (max-width: 360px) {
            .services-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .service-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--border-light);
            cursor: pointer;
            transition: all var(--transition-base);
        }

        .service-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--primary);
        }

        .service-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 0.5rem;
        }

        .service-icon i {
            font-size: 1.125rem;
            color: var(--primary);
        }

        .service-title {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* === BOOKINGS SECTION === */
        .bookings-section {
            padding: 1rem;
        }

        .booking-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1rem;
            margin-bottom: 0.75rem;
            border: 1px solid var(--border-light);
            transition: all var(--transition-fast);
        }

        .booking-card:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .booking-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.75rem;
        }

        .booking-info h3 {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.375rem;
        }

        .booking-id {
            font-size: 0.8125rem;
            color: var(--text-muted);
            margin-bottom: 0.375rem;
            font-family: 'Courier New', monospace;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .copy-icon {
            color: var(--primary);
            font-size: 0.75rem;
            transition: all var(--transition-fast);
        }

        .booking-id:hover .copy-icon {
            transform: scale(1.1);
        }

        .booking-meta {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        .booking-meta-item {
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .booking-status {
            padding: 0.25rem 0.5rem;
            border-radius: var(--radius-full);
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-upcoming {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        .status-completed {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .status-cancelled {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
        }

        .booking-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
            padding-top: 0.75rem;
            border-top: 1px solid var(--border-light);
        }

        /* === CALENDAR PICKER === */
        .calendar-container {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            border: 1px solid var(--border-light);
            overflow: hidden;
        }

        .calendar-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: var(--primary-light);
            border-bottom: 1px solid var(--border-light);
        }

        .calendar-month {
            font-size: 1rem;
            font-weight: 700;
            color: var(--primary);
        }

        .calendar-days-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            padding: 0.5rem;
            gap: 0.25rem;
        }

        .calendar-day-header {
            text-align: center;
            padding: 0.5rem;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .calendar-day {
            text-align: center;
            padding: 0.75rem 0.5rem;
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.875rem;
            transition: all var(--transition-fast);
            border: 1px solid transparent;
        }

        .calendar-day:hover {
            background: var(--primary-light);
            border-color: var(--primary);
        }

        .calendar-day.selected {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .calendar-day.today {
            background: var(--bg-secondary);
            border-color: var(--border-light);
        }

        .calendar-day.disabled {
            color: var(--text-muted);
            cursor: not-allowed;
            background: var(--bg-secondary);
        }

        .calendar-day.disabled:hover {
            background: var(--bg-secondary);
            border-color: transparent;
        }

        /* === TIME PICKER === */
        .time-slot-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .time-slot-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .time-slot-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .time-slots-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
        }

        .time-slot {
            padding: 0.875rem;
            text-align: center;
            border: 1px solid var(--border-light);
            border-radius: var(--radius-md);
            cursor: pointer;
            font-size: 0.875rem;
            transition: all var(--transition-fast);
            background: var(--bg-card);
        }

        .time-slot:hover {
            border-color: var(--primary);
            background: var(--primary-light);
        }

        .time-slot.selected {
            border-color: var(--primary);
            background: var(--primary-light);
            color: var(--primary);
            font-weight: 600;
        }

        /* === ITEM COUNTER === */
        .counter-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 0.75rem 0;
        }

        .counter-btn {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-secondary);
            border: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .counter-btn:hover {
            background: var(--border-light);
        }

        .counter-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .counter-value {
            flex: 1;
            text-align: center;
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        /* === PROFILE SECTION === */
        .profile-section {
            padding: 1rem;
        }

        .profile-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .profile-avatar {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: var(--radius-lg);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.75rem;
            font-weight: 700;
        }

        .profile-info h2 {
            font-size: 1.375rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .profile-info p {
            color: var(--text-secondary);
            font-size: 0.9375rem;
        }

        .edit-profile-btn {
            margin-left: auto;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1rem;
            text-align: center;
            border: 1px solid var(--border-light);
        }

        .stat-card .value {
            font-size: 1.375rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-card .label {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* === ACCOUNT INFO === */
        .account-info {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1rem;
            border: 1px solid var(--border-light);
            margin-bottom: 1rem;
        }

        .account-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .account-header i {
            color: var(--primary);
            font-size: 1.125rem;
        }

        .account-header h3 {
            font-size: 1rem;
            font-weight: 600;
        }

        .account-details {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .account-number {
            font-family: 'Courier New', monospace;
            font-size: 0.9375rem;
            font-weight: 600;
            letter-spacing: 1px;
            margin-bottom: 0.25rem;
        }

        .account-name {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        /* === CONTACT CARDS === */
        .contact-grid {
            display: grid;
            gap: 0.75rem;
            margin-bottom: 1.5rem;
        }

        .contact-card {
            background: var(--bg-card);
            border-radius: var(--radius-lg);
            padding: 1rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border: 1px solid var(--border-light);
            text-decoration: none;
            color: var(--text-primary);
            transition: all var(--transition-fast);
        }

        .contact-card:hover {
            border-color: var(--primary);
            transform: translateY(-1px);
        }

        .contact-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-light);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .contact-icon i {
            color: var(--primary);
            font-size: 1.125rem;
        }

        .contact-info h4 {
            font-size: 0.9375rem;
            font-weight: 600;
            margin-bottom: 0.125rem;
        }

        .contact-info p {
            font-size: 0.8125rem;
            color: var(--text-secondary);
        }

        /* === BOTTOM NAVIGATION === */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-nav);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-top: 1px solid var(--border-light);
            display: flex;
            justify-content: space-around;
            padding: 0.5rem 0;
            z-index: 1000;
            max-width: 500px;
            margin: 0 auto;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: var(--text-secondary);
            padding: 0.375rem;
            border-radius: var(--radius-md);
            transition: all var(--transition-fast);
            flex: 1;
            max-width: 80px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            margin-bottom: 0.25rem;
        }

        .nav-label {
            font-size: 0.6875rem;
            font-weight: 600;
        }

        /* === ANIMATIONS === */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(100%); }
            to { transform: translateY(0); }
        }

        @keyframes slideDown {
            from { 
                opacity: 0;
                transform: translateY(-10px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        .slide-up {
            animation: slideUp 0.3s ease;
        }

        /* === UTILITY CLASSES === */
        .text-center { text-align: center; }
        .text-muted { color: var(--text-muted); }
        .mt-1 { margin-top: 0.25rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-3 { margin-top: 0.75rem; }
        .mt-4 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .p-1 { padding: 0.25rem; }
        .p-2 { padding: 0.5rem; }
        .p-3 { padding: 0.75rem; }
        .p-4 { padding: 1rem; }
        .hidden { display: none !important; }

        /* === SCROLLBAR === */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: transparent;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-light);
            border-radius: var(--radius-full);
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--border-medium);
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">P</div>
        <div class="loader"></div>
        <p style="color: var(--text-secondary); margin-top: 0.75rem; font-size: 0.9375rem;">Loading Primer...</p>
    </div>

    <!-- Signup Modal -->
    <div class="signup-overlay" id="signupOverlay" style="display: none;">
        <div class="signup-modal">
            <div class="signup-header">
                <div class="logo-placeholder">P</div>
                <h2>Welcome to Primer</h2>
                <p>Create your account to get started</p>
            </div>
            
            <form id="signupForm">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" id="signupName" placeholder="Enter your full name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone Number</label>
                    <input type="tel" class="form-input" id="signupPhone" placeholder="+234 801 234 5678" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email Address (Optional)</label>
                    <input type="email" class="form-input" id="signupEmail" placeholder="your@email.com">
                </div>
                
                <div class="form-group custom-select">
                    <label class="form-label">Select City</label>
                    <div class="select-input" onclick="app.toggleSelect('citySelect')">
                        <span id="selectedCity">Choose your city</span>
                        <i class="fas fa-chevron-down"></i>
                    </div>
                    <div class="select-dropdown" id="citySelect">
                        <div class="select-option" onclick="app.selectCity('kaduna', 'Kaduna')">Kaduna</div>
                        <div class="select-option" onclick="app.selectCity('abuja', 'Abuja')">Abuja</div>
                        <div class="select-option" onclick="app.selectCity('lagos', 'Lagos')">Lagos</div>
                        <div class="select-option" onclick="app.selectCity('kano', 'Kano')">Kano</div>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Default Address (Optional)</label>
                    <textarea class="form-input form-textarea" id="signupAddress" placeholder="House number, street, landmark..."></textarea>
                </div>
                
                <button type="submit" class="btn btn-primary btn-full">
                    <i class="fas fa-check"></i> Create Account
                </button>
                
                <p class="text-center text-muted mt-3" style="font-size: 0.75rem;">
                    By signing up, you agree to our Terms of Service
                </p>
            </form>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="app"></div>

    <!-- Bottom Up Modal Container -->
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="bottom-modal" id="bottomModal"></div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="#home" class="nav-item active" onclick="app.navigate('home')">
            <div class="nav-icon">
                <i class="fas fa-home"></i>
            </div>
            <span class="nav-label">Home</span>
        </a>
        
        <a href="#bookings" class="nav-item" onclick="app.navigate('bookings')">
            <div class="nav-icon">
                <i class="fas fa-calendar-alt"></i>
            </div>
            <span class="nav-label">Bookings</span>
        </a>
        
        <a href="#services" class="nav-item" onclick="app.navigate('services')">
            <div class="nav-icon">
                <i class="fas fa-concierge-bell"></i>
            </div>
            <span class="nav-label">Services</span>
        </a>
        
        <a href="#profile" class="nav-item" onclick="app.navigate('profile')">
            <div class="nav-icon">
                <i class="fas fa-user"></i>
            </div>
            <span class="nav-label">Profile</span>
        </a>
    </nav>

    <script>
        class PrimerApp {
            constructor() {
                this.currentView = 'home';
                this.user = null;
                this.services = [];
                this.cities = [];
                this.bookings = [];
                this.offlineQueue = [];
                this.currentBooking = {
                    service: null,
                    itemCount: 1,
                    startTime: null,
                    endTime: null,
                    area: null,
                    selectedDate: null,
                    address: '',
                    description: ''
                };
                
                // Initialize
                this.init();
            }
            
            async init() {
                try {
                    // Setup theme first
                    this.setupTheme();
                    
                    // Check for user registration
                    await this.checkUserRegistration();
                    
                    // Load data
                    await this.loadData();
                    
                    // Load offline queue
                    this.loadOfflineQueue();
                    
                    // Hide loading screen
                    setTimeout(() => {
                        const loadingScreen = document.getElementById('loadingScreen');
                        if (loadingScreen) {
                            loadingScreen.style.opacity = '0';
                            setTimeout(() => {
                                loadingScreen.style.display = 'none';
                                this.renderHome();
                            }, 300);
                        }
                    }, 500);
                    
                    // Setup event listeners
                    this.setupEventListeners();
                    
                } catch (error) {
                    console.error('Initialization error:', error);
                    if (error.message !== 'User not registered') {
                        this.showAlert('Error', 'Failed to load app. Please refresh.', 'error');
                    }
                }
            }
            
            setupEventListeners() {
                // Online/offline detection
                window.addEventListener('online', () => this.syncOfflineData());
                window.addEventListener('offline', () => {
                    this.showAlert('Offline', 'You are currently offline. Your data will sync when you reconnect.', 'info');
                });
                
                // Hash change for navigation
                window.addEventListener('hashchange', () => {
                    const view = window.location.hash.substring(1) || 'home';
                    this.navigate(view);
                });
                
                // Close dropdowns when clicking outside
                document.addEventListener('click', (e) => {
                    if (!e.target.closest('.custom-select')) {
                        document.querySelectorAll('.select-dropdown').forEach(d => {
                            d.classList.remove('active');
                        });
                    }
                });
                
                // Close bottom modal when clicking backdrop
                const backdrop = document.getElementById('modalBackdrop');
                if (backdrop) {
                    backdrop.addEventListener('click', () => {
                        this.closeBottomModal();
                    });
                }
            }
            
            setupTheme() {
                const savedTheme = localStorage.getItem('primer_theme') || 'light';
                document.documentElement.setAttribute('data-theme', savedTheme);
            }
            
            toggleTheme() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'light' ? 'dark' : 'light';
                
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('primer_theme', newTheme);
                
                if (this.user) {
                    this.user.settings.theme = newTheme;
                    localStorage.setItem('primer_user', JSON.stringify(this.user));
                }
            }
            
            async checkUserRegistration() {
                const userData = localStorage.getItem('primer_user');
                
                if (!userData) {
                    const signupOverlay = document.getElementById('signupOverlay');
                    if (signupOverlay) {
                        signupOverlay.style.display = 'flex';
                        
                        const signupForm = document.getElementById('signupForm');
                        if (signupForm) {
                            signupForm.addEventListener('submit', (e) => {
                                e.preventDefault();
                                this.handleSignup();
                            });
                        }
                    }
                    
                    throw new Error('User not registered');
                }
                
                this.user = JSON.parse(userData);
                
                if (!this.user.deviceId) {
                    this.user.deviceId = this.generateDeviceId();
                    localStorage.setItem('primer_user', JSON.stringify(this.user));
                }
            }
            
            generateDeviceId() {
                return 'device_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }
            
            async getIPAddress() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    return 'unknown';
                }
            }
            
            toggleSelect(selectId) {
                const dropdown = document.getElementById(selectId);
                if (!dropdown) return;
                
                const isActive = dropdown.classList.contains('active');
                
                document.querySelectorAll('.select-dropdown').forEach(d => {
                    d.classList.remove('active');
                });
                
                if (!isActive) {
                    dropdown.classList.add('active');
                }
            }
            
            selectCity(cityId, cityName) {
                const selectedCity = document.getElementById('selectedCity');
                if (selectedCity) {
                    selectedCity.textContent = cityName;
                }
                this.toggleSelect('citySelect');
            }
            
            async handleSignup() {
                const nameInput = document.getElementById('signupName');
                const phoneInput = document.getElementById('signupPhone');
                const emailInput = document.getElementById('signupEmail');
                const addressInput = document.getElementById('signupAddress');
                const cityElement = document.getElementById('selectedCity');
                
                if (!nameInput || !phoneInput || !cityElement) {
                    this.showAlert('Error', 'Form elements not found', 'error');
                    return;
                }
                
                const name = nameInput.value;
                const phone = phoneInput.value;
                const email = emailInput ? emailInput.value : '';
                const address = addressInput ? addressInput.value : '';
                const city = cityElement.textContent === 'Choose your city' ? '' : cityElement.textContent;
                
                if (!name || !phone || !city) {
                    this.showAlert('Missing Information', 'Please fill in all required fields', 'warning');
                    return;
                }
                
                const ip = await this.getIPAddress();
                
                const user = {
                    id: this.generateDeviceId(),
                    deviceId: this.generateDeviceId(),
                    name: name.trim(),
                    phone: phone.trim(),
                    email: email.trim() || null,
                    city: this.getCityIdByName(city),
                    address: address.trim() || null,
                    registeredAt: new Date().toISOString(),
                    ip: ip,
                    settings: {
                        notifications: true,
                        theme: 'light'
                    }
                };
                
                this.user = user;
                localStorage.setItem('primer_user', JSON.stringify(user));
                
                const signupOverlay = document.getElementById('signupOverlay');
                if (signupOverlay) {
                    signupOverlay.style.display = 'none';
                }
                
                this.showAlert('Welcome to Primer!', 'Your account has been created successfully.', 'success', () => {
                    this.renderHome();
                });
            }
            
            getCityIdByName(cityName) {
                const cityMap = {
                    'Kaduna': 'kaduna',
                    'Abuja': 'abuja',
                    'Lagos': 'lagos',
                    'Kano': 'kano'
                };
                return cityMap[cityName] || 'kaduna';
            }
            
            async loadData() {
                try {
                    const servicesResponse = await this.fetchJSON('services.json');
                    this.services = Array.isArray(servicesResponse) ? servicesResponse : this.getDefaultServices();
                } catch (error) {
                    console.warn('Failed to load services:', error);
                    this.services = this.getDefaultServices();
                }
                
                try {
                    const areasResponse = await this.fetchJSON('areas.json');
                    this.cities = areasResponse?.cities || this.getDefaultCities();
                } catch (error) {
                    console.warn('Failed to load areas:', error);
                    this.cities = this.getDefaultCities();
                }
                
                const bookingsData = localStorage.getItem('primer_bookings');
                this.bookings = bookingsData ? JSON.parse(bookingsData) : [];
            }
            
            async fetchJSON(url) {
                return new Promise((resolve, reject) => {
                    const xhr = new XMLHttpRequest();
                    xhr.open('GET', url, true);
                    xhr.timeout = 5000;
                    xhr.onload = () => {
                        if (xhr.status === 200) {
                            try {
                                resolve(JSON.parse(xhr.responseText));
                            } catch (e) {
                                reject(new Error(`Invalid JSON in ${url}`));
                            }
                        } else {
                            reject(new Error(`Failed to load ${url}: ${xhr.status}`));
                        }
                    };
                    xhr.onerror = () => reject(new Error(`Network error loading ${url}`));
                    xhr.ontimeout = () => reject(new Error(`Timeout loading ${url}`));
                    xhr.send();
                });
            }
            
            getDefaultServices() {
                return [
                    {
                        id: 'moving',
                        title: 'Home Moving',
                        description: 'Professional moving services',
                        icon: 'truck-moving',
                        hasCounter: false,
                        counterLabel: '',
                        minItems: 0,
                        maxItems: 0,
                        requiresAddress: true
                    },
                    {
                        id: 'cleaning',
                        title: 'Home Cleaning',
                        description: 'Deep cleaning services',
                        icon: 'broom',
                        hasCounter: true,
                        counterLabel: 'Rooms',
                        minItems: 1,
                        maxItems: 10,
                        requiresAddress: true
                    },
                    {
                        id: 'laundry',
                        title: 'Laundry Service',
                        description: 'Wash, dry, and fold',
                        icon: 'tshirt',
                        hasCounter: true,
                        counterLabel: 'Pieces',
                        minItems: 5,
                        maxItems: 50,
                        requiresAddress: false
                    },
                    {
                        id: 'packing',
                        title: 'Packing Service',
                        description: 'Professional packing and unpacking',
                        icon: 'box',
                        hasCounter: true,
                        counterLabel: 'Boxes',
                        minItems: 1,
                        maxItems: 20,
                        requiresAddress: true
                    }
                ];
            }
            
            getDefaultCities() {
                return [
                    {
                        id: 'kaduna',
                        name: 'Kaduna',
                        areas: ['Barnawa', 'Sabon Tasha', 'Kawo', 'Ungwan Rimi']
                    }
                ];
            }
            
            getCityName(cityId) {
                const city = this.cities.find(c => c.id === cityId);
                return city ? city.name : 'Your City';
            }
            
            loadOfflineQueue() {
                const queueData = localStorage.getItem('primer_offline_queue');
                this.offlineQueue = queueData ? JSON.parse(queueData) : [];
            }
            
            saveOfflineQueue() {
                localStorage.setItem('primer_offline_queue', JSON.stringify(this.offlineQueue));
            }
            
            async syncOfflineData() {
                if (this.offlineQueue.length === 0) return;
                
                for (const item of [...this.offlineQueue]) {
                    try {
                        await this.submitToFormspree(item);
                        this.offlineQueue = this.offlineQueue.filter(b => b.bookingId !== item.bookingId);
                    } catch (error) {
                        console.warn('Failed to sync:', error);
                        break;
                    }
                }
                
                this.saveOfflineQueue();
            }
            
            navigate(view) {
                this.currentView = view;
                window.location.hash = view;
                
                document.querySelectorAll('.nav-item').forEach(item => {
                    item.classList.remove('active');
                    if (item.getAttribute('href') === `#${view}`) {
                        item.classList.add('active');
                    }
                });
                
                this.closeBottomModal();
                
                switch(view) {
                    case 'home':
                        this.renderHome();
                        break;
                    case 'bookings':
                        this.renderBookings();
                        break;
                    case 'services':
                        this.renderServices();
                        break;
                    case 'profile':
                        this.renderProfile();
                        break;
                    default:
                        this.renderHome();
                }
            }
            
            renderHome() {
                if (!this.user) return;
                
                const userCity = this.getCityName(this.user?.city);
                const recommendations = this.getRecommendations();
                
                const html = `
                    <div class="app-header">
                        <div class="header-content">
                            <div class="header-left">
                                <div class="header-logo">P</div>
                                <div class="header-info">
                                    <h1>Primer</h1>
                                    <p>${userCity} Services</p>
                                </div>
                            </div>
                            <div class="header-actions">
                                <button class="icon-btn" onclick="app.toggleTheme()">
                                    <i class="fas fa-moon"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="main-content">
                        <section class="hero-section fade-in">
                            <h1 class="hero-title">Hello, ${this.user?.name?.split(' ')[0] || 'there'}!</h1>
                            <p class="hero-subtitle">Book professional services in ${userCity} with ease</p>
                        </section>
                        
                        <div class="promo-banner" onclick="app.showPromoDetails()">
                            <div class="promo-icon">
                                <i class="fas fa-gift"></i>
                            </div>
                            <div class="promo-content">
                                <h3>50% Off First Booking!</h3>
                                <p>Use code: PRIMER50 â€¢ Valid this month only</p>
                            </div>
                        </div>
                        
                        ${recommendations.length > 0 ? `
                            <section class="services-section">
                                <div class="section-title">
                                    <span>Recommended For You</span>
                                </div>
                                <div class="services-grid">
                                    ${recommendations.map(service => `
                                        <div class="service-card" onclick="app.showBookingForm('${service.id}')">
                                            <div class="service-icon">
                                                <i class="fas fa-${service.icon}"></i>
                                            </div>
                                            <div class="service-title">${service.title}</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </section>
                        ` : ''}
                        
                        <section class="services-section slide-up">
                            <div class="section-title">
                                <span>All Services</span>
                                <a href="#services" class="section-link" onclick="app.navigate('services')">View all</a>
                            </div>
                            <div class="services-grid">
                                ${this.services.slice(0, 6).map(service => `
                                    <div class="service-card" onclick="app.showBookingForm('${service.id}')">
                                        <div class="service-icon">
                                            <i class="fas fa-${service.icon}"></i>
                                        </div>
                                        <div class="service-title">${service.title}</div>
                                    </div>
                                `).join('')}
                                
                                <div class="service-card" onclick="app.showStoreInfo()">
                                    <div class="service-icon">
                                        <i class="fas fa-store"></i>
                                    </div>
                                    <div class="service-title">Primer Store</div>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
                
                document.getElementById('app').innerHTML = html;
            }
            
            getRecommendations() {
                if (!this.services.length) return [];
                return this.services.slice(0, 3);
            }
            
            renderBookings() {
                const allBookings = [...this.bookings];
                
                const html = `
                    <div class="app-header">
                        <div class="header-content">
                            <div class="header-left">
                                <button class="icon-btn" onclick="app.navigate('home')">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="header-info">
                                    <h1>My Bookings</h1>
                                    <p>${allBookings.length} total</p>
                                </div>
                            </div>
                            <button class="btn btn-primary btn-sm" onclick="app.showServiceSelection()">
                                <i class="fas fa-plus"></i> New
                            </button>
                        </div>
                    </div>
                    
                    <div class="main-content">
                        ${allBookings.length > 0 ? `
                            <section class="bookings-section fade-in">
                                ${allBookings.map(booking => `
                                    <div class="booking-card">
                                        <div class="booking-header">
                                            <div class="booking-info">
                                                <h3>${booking.service}</h3>
                                                <div class="booking-id" onclick="app.copyBookingId('${booking.bookingId}')">
                                                    ID: ${booking.bookingId}
                                                    <i class="fas fa-copy copy-icon"></i>
                                                </div>
                                                <div class="booking-meta">
                                                    <span class="booking-meta-item">
                                                        <i class="far fa-calendar"></i> ${booking.date}
                                                    </span>
                                                    <span class="booking-meta-item">
                                                        <i class="far fa-clock"></i> ${booking.startTime} - ${booking.endTime}
                                                    </span>
                                                    ${booking.area ? `
                                                        <span class="booking-meta-item">
                                                            <i class="fas fa-map-marker-alt"></i> ${booking.area}
                                                        </span>
                                                    ` : ''}
                                                </div>
                                            </div>
                                            <div class="booking-status status-${booking.status}">${booking.status}</div>
                                        </div>
                                        ${booking.status === 'upcoming' ? `
                                            <div class="booking-actions">
                                                <button class="btn btn-outline btn-sm" onclick="app.callSupport()">
                                                    <i class="fas fa-phone"></i> Call
                                                </button>
                                                <button class="btn btn-outline btn-sm" onclick="app.showCancelConfirmation('${booking.bookingId}')" style="color: var(--error); border-color: var(--error);">
                                                    <i class="fas fa-times"></i> Cancel
                                                </button>
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                            </section>
                        ` : `
                            <div class="empty-state" style="text-align: center; padding: 3rem 1rem;">
                                <div class="empty-icon" style="width: 64px; height: 64px; background: var(--bg-secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 1rem; color: var(--text-muted); font-size: 1.5rem;">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <h3 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">No Bookings Yet</h3>
                                <p style="color: var(--text-secondary); margin-bottom: 1.5rem; line-height: 1.5;">You haven't made any bookings yet.</p>
                                <button class="btn btn-primary" onclick="app.showServiceSelection()">
                                    Make Your First Booking
                                </button>
                            </div>
                        `}
                    </div>
                `;
                
                document.getElementById('app').innerHTML = html;
            }
            
            renderServices() {
                const html = `
                    <div class="app-header">
                        <div class="header-content">
                            <div class="header-left">
                                <button class="icon-btn" onclick="app.navigate('home')">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="header-info">
                                    <h1>All Services</h1>
                                    <p>Choose from our services</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="main-content">
                        <section class="services-section fade-in">
                            <div class="services-grid" style="grid-template-columns: repeat(2, 1fr);">
                                ${this.services.map(service => `
                                    <div class="service-card" onclick="app.showBookingForm('${service.id}')" style="text-align: left; padding: 1rem;">
                                        <div class="service-icon" style="width: 45px; height: 45px; margin-bottom: 0.75rem;">
                                            <i class="fas fa-${service.icon}"></i>
                                        </div>
                                        <h3 style="font-size: 1rem; font-weight: 700; margin-bottom: 0.25rem;">${service.title}</h3>
                                        <p style="color: var(--text-secondary); font-size: 0.8125rem; line-height: 1.4;">${service.description}</p>
                                        ${service.hasCounter ? `
                                            <div style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">
                                                <i class="fas fa-hashtag"></i> Count by ${service.counterLabel}
                                            </div>
                                        ` : ''}
                                    </div>
                                `).join('')}
                                
                                <div class="service-card" onclick="app.showStoreInfo()" style="border: 2px dashed var(--primary); text-align: left; padding: 1rem;">
                                    <div class="service-icon" style="width: 45px; height: 45px; margin-bottom: 0.75rem; background: var(--primary);">
                                        <i class="fas fa-store" style="color: white;"></i>
                                    </div>
                                    <h3 style="font-size: 1rem; font-weight: 700; margin-bottom: 0.25rem;">Primer Store</h3>
                                    <p style="color: var(--text-secondary); font-size: 0.8125rem; line-height: 1.4;">Shop for supplies, materials, and more</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
                
                document.getElementById('app').innerHTML = html;
            }
            
            renderProfile() {
                if (!this.user) return;
                
                const userCity = this.getCityName(this.user?.city);
                const userCityObj = this.cities.find(c => c.id === this.user?.city);
                const userAreas = userCityObj?.areas || [];
                
                const html = `
                    <div class="app-header">
                        <div class="header-content">
                            <div class="header-left">
                                <button class="icon-btn" onclick="app.navigate('home')">
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <div class="header-info">
                                    <h1>My Profile</h1>
                                    <p>Account & Settings</p>
                                </div>
                            </div>
                            <button class="icon-btn" onclick="app.toggleTheme()">
                                <i class="fas ${document.documentElement.getAttribute('data-theme') === 'dark' ? 'fa-sun' : 'fa-moon'}"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="main-content">
                        <section class="profile-section fade-in">
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    ${this.user?.name?.charAt(0).toUpperCase() || 'U'}
                                </div>
                                <div class="profile-info">
                                    <h2>${this.user?.name || 'User'}</h2>
                                    <p>${this.user?.phone || 'No phone number'}</p>
                                    <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">
                                        <i class="fas fa-map-marker-alt"></i> ${userCity}
                                    </p>
                                </div>
                                <button class="btn btn-outline btn-sm edit-profile-btn" onclick="app.showEditProfile()">
                                    <i class="fas fa-edit"></i> Edit
                                </button>
                            </div>
                            
                            <div class="stats-grid">
                                <div class="stat-card">
                                    <div class="value">${this.bookings.length}</div>
                                    <div class="label">Total Bookings</div>
                                </div>
                                <div class="stat-card">
                                    <div class="value">${this.bookings.filter(b => b.status === 'completed').length}</div>
                                    <div class="label">Completed</div>
                                </div>
                                <div class="stat-card">
                                    <div class="value">${this.bookings.filter(b => b.status === 'upcoming').length}</div>
                                    <div class="label">Upcoming</div>
                                </div>
                                <div class="stat-card">
                                    <div class="value">${this.bookings.filter(b => b.status === 'cancelled').length}</div>
                                    <div class="label">Cancelled</div>
                                </div>
                            </div>
                            
                            <div class="account-info">
                                <div class="account-header">
                                    <i class="fas fa-university"></i>
                                    <h3>Payment Details</h3>
                                </div>
                                <div class="account-details">
                                    <div class="account-number">0123456789</div>
                                    <div class="account-name">Primer Services Ltd</div>
                                </div>
                                <p style="color: var(--text-secondary); font-size: 0.8125rem; margin-bottom: 0.75rem;">
                                    Include booking ID as reference when making payment
                                </p>
                                <div class="booking-actions" style="border: none; padding: 0; margin: 0;">
                                    <button class="btn btn-outline btn-sm" onclick="app.copyAccountNumber()">
                                        <i class="fas fa-copy"></i> Copy Account
                                    </button>
                                    <button class="btn btn-outline btn-sm" onclick="app.showBankDetails()">
                                        <i class="fas fa-info-circle"></i> Bank Info
                                    </button>
                                </div>
                            </div>
                            
                            <div class="contact-grid">
                                <a href="tel:+2349012345678" class="contact-card">
                                    <div class="contact-icon">
                                        <i class="fas fa-phone"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>Call Support</h4>
                                        <p>+234 901 234 5678</p>
                                    </div>
                                </a>
                                
                                <a href="https://wa.me/2349012345678" target="_blank" class="contact-card">
                                    <div class="contact-icon" style="background: rgba(37, 211, 102, 0.1);">
                                        <i class="fab fa-whatsapp" style="color: #25D366;"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>WhatsApp</h4>
                                        <p>Chat with us</p>
                                    </div>
                                </a>
                                
                                <div class="contact-card" onclick="app.sendEmail()">
                                    <div class="contact-icon">
                                        <i class="fas fa-envelope"></i>
                                    </div>
                                    <div class="contact-info">
                                        <h4>Email</h4>
                                        <p>support@primer.ng</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="account-info">
                                <div class="account-header">
                                    <i class="fas fa-info-circle"></i>
                                    <h3>App Information</h3>
                                </div>
                                <div style="color: var(--text-secondary); font-size: 0.8125rem; line-height: 1.6;">
                                    <p><strong>Version:</strong> 2.0.0</p>
                                    <p><strong>Location:</strong> ${userCity}</p>
                                    <p><strong>Available Areas:</strong> ${userAreas.slice(0, 3).join(', ')}${userAreas.length > 3 ? '...' : ''}</p>
                                    <p><strong>Device ID:</strong> ${this.user?.deviceId?.substring(0, 10)}...</p>
                                    <p style="margin-top: 0.75rem; font-size: 0.75rem;">Â© 2024 Primer Services. All rights reserved.</p>
                                </div>
                            </div>
                        </section>
                    </div>
                `;
                
                document.getElementById('app').innerHTML = html;
            }
            
            showEditProfile() {
                const currentCityName = this.getCityName(this.user?.city);
                
                const modalHTML = `
                    <div class="modal-header">
                        <h2 class="modal-title">Edit Profile</h2>
                        <button class="modal-close" onclick="app.closeBottomModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="editProfileForm" onsubmit="event.preventDefault(); app.saveProfileChanges()">
                        <div class="form-group">
                            <label class="form-label">Full Name</label>
                            <input type="text" class="form-input" id="editName" value="${this.user?.name || ''}" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Phone Number</label>
                            <input type="tel" class="form-input" id="editPhone" value="${this.user?.phone || ''}" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Email Address</label>
                            <input type="email" class="form-input" id="editEmail" value="${this.user?.email || ''}">
                        </div>
                        
                        <div class="form-group custom-select">
                            <label class="form-label">City</label>
                            <div class="select-input" onclick="app.toggleSelect('editCitySelect')">
                                <span id="editSelectedCity">${currentCityName || 'Choose your city'}</span>
                                <i class="fas fa-chevron-down"></i>
                            </div>
                            <div class="select-dropdown" id="editCitySelect">
                                ${this.cities.map(city => `
                                    <div class="select-option ${city.id === this.user?.city ? 'selected' : ''}" onclick="app.selectEditCity('${city.id}', '${city.name}')">
                                        ${city.name}
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Address</label>
                            <textarea class="form-input form-textarea" id="editAddress" placeholder="Your address...">${this.user?.address || ''}</textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-full mt-3">
                            <i class="fas fa-save"></i> Save Changes
                        </button>
                    </form>
                `;
                
                this.showBottomModal(modalHTML);
            }
            
            selectEditCity(cityId, cityName) {
                const selectedCity = document.getElementById('editSelectedCity');
                if (selectedCity) {
                    selectedCity.textContent = cityName;
                }
                if (this.user) {
                    this.user.city = cityId;
                }
                this.toggleSelect('editCitySelect');
            }
            
            saveProfileChanges() {
                const nameInput = document.getElementById('editName');
                const phoneInput = document.getElementById('editPhone');
                const emailInput = document.getElementById('editEmail');
                const addressInput = document.getElementById('editAddress');
                
                if (!nameInput || !phoneInput) {
                    this.showAlert('Error', 'Form elements not found', 'error');
                    return;
                }
                
                const name = nameInput.value;
                const phone = phoneInput.value;
                const email = emailInput ? emailInput.value : '';
                const address = addressInput ? addressInput.value : '';
                
                if (!name || !phone) {
                    this.showAlert('Missing Information', 'Name and phone number are required', 'warning');
                    return;
                }
                
                this.user.name = name.trim();
                this.user.phone = phone.trim();
                this.user.email = email.trim() || null;
                this.user.address = address.trim() || null;
                this.user.updatedAt = new Date().toISOString();
                
                localStorage.setItem('primer_user', JSON.stringify(this.user));
                
                this.closeBottomModal();
                
                this.showAlert('Profile Updated', 'Your profile has been updated successfully.', 'success', () => {
                    this.renderProfile();
                });
            }
            
            copyAccountNumber() {
                navigator.clipboard.writeText('0123456789').then(() => {
                    this.showAlert('Copied!', 'Account number copied to clipboard.', 'success');
                }).catch(() => {
                    this.showAlert('Error', 'Failed to copy account number', 'error');
                });
            }
            
            copyBookingId(bookingId) {
                navigator.clipboard.writeText(bookingId).then(() => {
                    this.showAlert('Copied!', 'Booking ID copied to clipboard.', 'success');
                }).catch(() => {
                    this.showAlert('Error', 'Failed to copy booking ID', 'error');
                });
            }
            
            showBankDetails() {
                this.showAlert('Bank Details', 
                    'Bank: Zenith Bank\nAccount Name: Primer Services Ltd\nAccount Number: 0123456789\nAlways include booking ID as reference.',
                    'info'
                );
            }
            
            showServiceSelection() {
                const modalHTML = `
                    <div class="modal-header">
                        <h2 class="modal-title">Select Service</h2>
                        <button class="modal-close" onclick="app.closeBottomModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div style="display: flex; flex-direction: column; gap: 0.75rem;">
                        ${this.services.map(service => `
                            <div class="contact-card" onclick="app.showBookingForm('${service.id}')" style="cursor: pointer;">
                                <div class="contact-icon">
                                    <i class="fas fa-${service.icon}"></i>
                                </div>
                                <div class="contact-info">
                                    <h4>${service.title}</h4>
                                    <p>${service.description}</p>
                                </div>
                                <i class="fas fa-chevron-right" style="color: var(--text-muted);"></i>
                            </div>
                        `).join('')}
                    </div>
                `;
                
                this.showBottomModal(modalHTML);
            }
            
            showBookingForm(serviceId) {
                const service = this.services.find(s => s.id === serviceId);
                if (!service) {
                    this.showAlert('Error', 'Service not found', 'error');
                    return;
                }
                
                this.currentBooking.service = service;
                this.currentBooking.itemCount = service.hasCounter ? Math.max(service.minItems, 1) : 1;
                
                const userCity = this.cities.find(c => c.id === this.user?.city);
                const areas = userCity?.areas || [];
                
                // Generate 30-day calendar
                const calendarHTML = this.generate30DayCalendar();
                
                // Generate time slots (4-hour windows)
                const timeSlots = [
                    { start: '8:00 AM', end: '12:00 PM', value: 'morning' },
                    { start: '12:00 PM', end: '4:00 PM', value: 'afternoon' },
                    { start: '4:00 PM', end: '8:00 PM', value: 'evening' }
                ];
                
                const modalHTML = `
                    <div class="modal-header">
                        <h2 class="modal-title">Book ${service.title}</h2>
                        <button class="modal-close" onclick="app.closeBottomModal()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <form id="bookingForm" onsubmit="event.preventDefault(); app.createBooking()">
                        ${service.requiresAddress ? `
                            <div class="form-group">
                                <label class="form-label">Address Details</label>
                                <textarea class="form-input form-textarea" id="addressDetails" placeholder="House number, street, landmark, apartment details..." required>${this.user?.address || ''}</textarea>
                            </div>
                        ` : ''}
                        
                        <div class="form-group">
                            <label class="form-label">Service Description</label>
                            <textarea class="form-input form-textarea" id="serviceDescription" placeholder="Describe what needs to be done..."></textarea>
                        </div>
                        
                        ${areas.length > 0 ? `
                            <div class="form-group custom-select">
                                <label class="form-label">Select Area in ${userCity?.name || 'Your City'}</label>
                                <div class="select-input" onclick="app.toggleSelect('areaSelect')">
                                    <span id="selectedArea">Choose area</span>
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                                <div class="select-dropdown" id="areaSelect">
                                    ${areas.map(area => `
                                        <div class="select-option" onclick="app.selectArea('${area}')">${area}</div>
                                    `).join('')}
                                </div>
                            </div>
                        ` : ''}
                        
                        <div class="form-group">
                            <label class="form-label">Select Date</label>
                            <div class="calendar-container">
                                ${calendarHTML}
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label">Select Time Slot</label>
                            <div class="time-slot-container">
                                ${timeSlots.map(slot => `
                                    <div class="time-slots-grid">
                                        <div class="time-slot ${this.currentBooking.startTime === slot.start && this.currentBooking.endTime === slot.end ? 'selected' : ''}" 
                                             onclick="app.selectTimeSlot('${slot.start}', '${slot.end}')">
                                            ${slot.start} - ${slot.end}
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        ${service.hasCounter ? `
                            <div class="form-group">
                                <label class="form-label">Number of ${service.counterLabel}</label>
                                <div class="counter-controls">
                                    <button type="button" class="counter-btn" onclick="app.adjustItemCount(-1)" ${service.minItems >= this.currentBooking.itemCount ? 'disabled' : ''}>
                                        <i class="fas fa-minus"></i>
                                    </button>
                                    <div class="counter-value">${this.currentBooking.itemCount}</div>
                                    <button type="button" class="counter-btn" onclick="app.adjustItemCount(1)" ${service.maxItems <= this.currentBooking.itemCount ? 'disabled' : ''}>
                                        <i class="fas fa-plus"></i>
                                    </button>
                                </div>
                                <div style="text-align: center; color: var(--text-secondary); font-size: 0.8125rem;">
                                    ${service.minItems} - ${service.maxItems} ${service.counterLabel}
                                </div>
                            </div>
                        ` : ''}
                        
                        <button type="submit" class="btn btn-primary btn-full mt-3">
                            <i class="fas fa-check-circle"></i> Confirm Booking
                        </button>
                    </form>
                `;
                
                this.showBottomModal(modalHTML);
            }
            
            generate30DayCalendar() {
                const today = new Date();
                const currentMonth = today.getMonth();
                const currentYear = today.getFullYear();
                const currentDate = today.getDate();
                
                // Get month name
                const monthNames = ["January", "February", "March", "April", "May", "June",
                    "July", "August", "September", "October", "November", "December"];
                const monthName = monthNames[currentMonth];
                
                // Get day names for headers
                const dayNames = ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"];
                
                // Calculate the day of week for the 1st of current month
                const firstDay = new Date(currentYear, currentMonth, 1).getDay();
                
                // Generate 30 days starting from today
                let calendarHTML = `
                    <div class="calendar-header">
                        <div class="calendar-month">${monthName} ${currentYear}</div>
                    </div>
                    <div class="calendar-days-grid">
                `;
                
                // Day headers
                dayNames.forEach(day => {
                    calendarHTML += `<div class="calendar-day-header">${day}</div>`;
                });
                
                // Calculate starting position
                let dayCounter = 0;
                let currentDay = currentDate;
                let currentMonthTemp = currentMonth;
                let currentYearTemp = currentYear;
                
                // Generate 30 days (6 rows * 7 days = 42 cells)
                for (let row = 0; row < 6; row++) {
                    for (let col = 0; col < 7; col++) {
                        if (dayCounter < 30) {
                            // Calculate actual date
                            const date = new Date(currentYearTemp, currentMonthTemp, currentDay);
                            
                            // Check if we need to move to next month
                            const daysInMonth = new Date(currentYearTemp, currentMonthTemp + 1, 0).getDate();
                            if (currentDay > daysInMonth) {
                                currentDay = 1;
                                currentMonthTemp++;
                                if (currentMonthTemp > 11) {
                                    currentMonthTemp = 0;
                                    currentYearTemp++;
                                }
                            }
                            
                            const isToday = currentDay === currentDate && currentMonthTemp === currentMonth;
                            const isSelected = this.currentBooking.selectedDate && 
                                              this.currentBooking.selectedDate.getDate() === currentDay &&
                                              this.currentBooking.selectedDate.getMonth() === currentMonthTemp;
                            
                            calendarHTML += `
                                <div class="calendar-day ${isToday ? 'today' : ''} ${isSelected ? 'selected' : ''}" 
                                     onclick="app.selectCalendarDate(${currentDay}, ${currentMonthTemp}, ${currentYearTemp})">
                                    ${currentDay}
                                </div>
                            `;
                            
                            currentDay++;
                            dayCounter++;
                        } else {
                            // Add empty cells
                            calendarHTML += `<div class="calendar-day disabled"></div>`;
                        }
                    }
                }
                
                calendarHTML += `</div>`;
                return calendarHTML;
            }
            
            selectCalendarDate(day, month, year) {
                const selectedDate = new Date(year, month, day);
                this.currentBooking.selectedDate = selectedDate;
                
                // Update UI - re-render calendar with new selection
                const service = this.currentBooking.service;
                if (service) {
                    // Re-render the booking form
                    this.showBookingForm(service.id);
                }
            }
            
            selectTimeSlot(startTime, endTime) {
                this.currentBooking.startTime = startTime;
                this.currentBooking.endTime = endTime;
                
                // Update UI
                const timeSlots = document.querySelectorAll('.time-slot');
                timeSlots.forEach(slot => {
                    slot.classList.remove('selected');
                });
                
                // Find and select the clicked slot
                timeSlots.forEach(slot => {
                    if (slot.textContent.includes(startTime) && slot.textContent.includes(endTime)) {
                        slot.classList.add('selected');
                    }
                });
            }
            
            selectArea(area) {
                this.currentBooking.area = area;
                const selectedArea = document.getElementById('selectedArea');
                if (selectedArea) {
                    selectedArea.textContent = area;
                }
                this.toggleSelect('areaSelect');
            }
            
            adjustItemCount(change) {
                const service = this.currentBooking.service;
                if (!service || !service.hasCounter) return;
                
                let newCount = this.currentBooking.itemCount + change;
                newCount = Math.max(service.minItems, Math.min(service.maxItems, newCount));
                
                this.currentBooking.itemCount = newCount;
                
                const counterValue = document.querySelector('.counter-value');
                const minusBtn = document.querySelector('.counter-btn:first-child');
                const plusBtn = document.querySelector('.counter-btn:last-child');
                
                if (counterValue) counterValue.textContent = newCount;
                if (minusBtn) minusBtn.disabled = newCount <= service.minItems;
                if (plusBtn) plusBtn.disabled = newCount >= service.maxItems;
            }
            
            async createBooking() {
                const service = this.currentBooking.service;
                if (!service) {
                    this.showAlert('Error', 'No service selected', 'error');
                    return;
                }
                
                const addressInput = document.getElementById('addressDetails');
                const descriptionInput = document.getElementById('serviceDescription');
                
                const address = addressInput ? addressInput.value : '';
                const description = descriptionInput ? descriptionInput.value : '';
                
                if (service.requiresAddress && !address) {
                    this.showAlert('Address Required', 'Please provide your address details.', 'warning');
                    return;
                }
                
                if (!this.currentBooking.area) {
                    this.showAlert('Area Required', 'Please select a service area.', 'warning');
                    return;
                }
                
                if (!this.currentBooking.selectedDate) {
                    this.showAlert('Date Required', 'Please select a date.', 'warning');
                    return;
                }
                
                if (!this.currentBooking.startTime || !this.currentBooking.endTime) {
                    this.showAlert('Time Required', 'Please select a time slot.', 'warning');
                    return;
                }
                
                const bookingId = 'PRM' + Date.now().toString().slice(-6);
                const formattedDate = this.formatDate(this.currentBooking.selectedDate);
                
                const bookingData = {
                    userId: this.user.id,
                    deviceId: this.user.deviceId,
                    userName: this.user.name,
                    userPhone: this.user.phone,
                    userEmail: this.user.email,
                    userCity: this.user.city,
                    userIP: this.user.ip,
                    
                    bookingId: bookingId,
                    serviceId: service.id,
                    service: service.title,
                    date: formattedDate,
                    startTime: this.currentBooking.startTime,
                    endTime: this.currentBooking.endTime,
                    area: this.currentBooking.area,
                    address: address || '',
                    description: description || '',
                    itemCount: service.hasCounter ? this.currentBooking.itemCount : null,
                    itemType: service.counterLabel,
                    status: 'upcoming',
                    timestamp: new Date().toISOString(),
                    source: 'web_app'
                };
                
                this.bookings.unshift(bookingData);
                localStorage.setItem('primer_bookings', JSON.stringify(this.bookings));
                
                try {
                    await this.submitToFormspree(bookingData);
                    this.showBookingConfirmation(bookingData);
                } catch (error) {
                    console.warn('Failed to submit, saving offline:', error);
                    this.queueForOffline(bookingData);
                    this.showBookingConfirmation(bookingData);
                }
                
                this.closeBottomModal();
            }
            
            formatDate(date) {
                if (!(date instanceof Date)) {
                    date = new Date(date);
                }
                return date.toLocaleDateString('en-US', { 
                    weekday: 'short', 
                    month: 'short', 
                    day: 'numeric',
                    year: 'numeric'
                });
            }
            
            async submitToFormspree(data) {
                // Use a test endpoint
                const formspreeEndpoint = 'https://formspree.io/f/xdoqrzak';
                
                const formData = new FormData();
                
                Object.keys(data).forEach(key => {
                    formData.append(key, data[key]);
                });
                
                try {
                    const response = await fetch(formspreeEndpoint, {
                        method: 'POST',
                        body: formData,
                        headers: {
                            'Accept': 'application/json'
                        }
                    });
                    
                    if (!response.ok) {
                        throw new Error('Formspree submission failed');
                    }
                    
                    return await response.json();
                } catch (error) {
                    throw error;
                }
            }
            
            queueForOffline(bookingData) {
                this.offlineQueue.push(bookingData);
                this.saveOfflineQueue();
            }
            
            showBookingConfirmation(bookingData) {
                const modalHTML = `
                    <div class="alert-overlay">
                        <div class="alert-modal">
                            <div class="alert-icon success">
                                <i class="fas fa-check"></i>
                            </div>
                            <h3 class="alert-title">Booking Confirmed!</h3>
                            <p class="alert-message">
                                Your ${bookingData.service} has been scheduled for ${bookingData.date} from ${bookingData.startTime} to ${bookingData.endTime}.
                            </p>
                            <div style="background: var(--bg-secondary); border-radius: var(--radius-md); padding: 0.75rem; margin: 1rem 0;">
                                <div style="font-size: 0.8125rem; color: var(--text-secondary); margin-bottom: 0.25rem;">Booking ID:</div>
                                <div style="font-family: 'Courier New', monospace; font-size: 0.9375rem; font-weight: 600; display: flex; align-items: center; justify-content: space-between;">
                                    <span>${bookingData.bookingId}</span>
                                    <button class="icon-btn" onclick="app.copyBookingId('${bookingData.bookingId}')" style="width: 32px; height: 32px; font-size: 0.875rem;">
                                        <i class="fas fa-copy"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="alert-actions">
                                <button class="alert-btn secondary" onclick="app.closeAlert(); app.navigate('home')">
                                    Home
                                </button>
                                <button class="alert-btn primary" onclick="app.closeAlert(); app.navigate('bookings')">
                                    View Bookings
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', modalHTML);
            }
            
            showCancelConfirmation(bookingId) {
                const modalHTML = `
                    <div class="alert-overlay">
                        <div class="alert-modal">
                            <div class="alert-icon warning">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <h3 class="alert-title">Cancel Booking?</h3>
                            <p class="alert-message">
                                Are you sure you want to cancel this booking? This action cannot be undone.
                            </p>
                            <div class="alert-actions">
                                <button class="alert-btn secondary" onclick="app.closeAlert()">
                                    Keep Booking
                                </button>
                                <button class="alert-btn primary" onclick="app.cancelBooking('${bookingId}')" style="background: var(--error);">
                                    Yes, Cancel
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', modalHTML);
            }
            
            async cancelBooking(bookingId) {
                const booking = this.bookings.find(b => b.bookingId === bookingId);
                if (!booking) {
                    this.showAlert('Error', 'Booking not found', 'error');
                    return;
                }
                
                booking.status = 'cancelled';
                booking.cancelledAt = new Date().toISOString();
                
                localStorage.setItem('primer_bookings', JSON.stringify(this.bookings));
                
                const cancelData = {
                    ...booking,
                    action: 'cancellation',
                    cancelledAt: booking.cancelledAt
                };
                
                try {
                    await this.submitToFormspree(cancelData);
                } catch (error) {
                    console.warn('Failed to send cancellation:', error);
                    this.queueForOffline(cancelData);
                }
                
                this.closeAlert();
                
                this.showAlert('Booking Cancelled', 'Your booking has been cancelled successfully.', 'success', () => {
                    if (this.currentView === 'bookings') {
                        this.renderBookings();
                    } else if (this.currentView === 'home') {
                        this.renderHome();
                    }
                });
            }
            
            showStoreInfo() {
                this.showAlert('Primer Store', 
                    'Our store feature is coming soon!\n\nYou will be able to shop for supplies, materials, and equipment needed for your services.\n\nStay tuned for updates!',
                    'info'
                );
            }
            
            showPromoDetails() {
                this.showAlert('Special Offer!', 
                    'Get 50% off your first booking with Primer!\n\nUse code: PRIMER50\nValid until end of month.\n\nTerms: Offer applies to new customers only. Maximum discount: â‚¦5,000.',
                    'info'
                );
            }
            
            callSupport() {
                window.location.href = 'tel:+2349012345678';
            }
            
            sendEmail() {
                window.location.href = 'mailto:support@primer.ng?subject=Primer App Support';
            }
            
            showAlert(title, message, type = 'info', callback = null) {
                const existingAlert = document.querySelector('.alert-overlay');
                if (existingAlert) {
                    existingAlert.remove();
                }
                
                const modalHTML = `
                    <div class="alert-overlay">
                        <div class="alert-modal">
                            <div class="alert-icon ${type}">
                                <i class="fas fa-${type === 'success' ? 'check' : type === 'error' ? 'times' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                            </div>
                            <h3 class="alert-title">${title}</h3>
                            <p class="alert-message">${message}</p>
                            <div class="alert-actions">
                                <button class="alert-btn primary" onclick="app.closeAlert()">
                                    OK
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                
                document.body.insertAdjacentHTML('beforeend', modalHTML);
                
                if (callback) {
                    this.alertCallback = callback;
                }
            }
            
            closeAlert() {
                const alert = document.querySelector('.alert-overlay');
                if (alert) {
                    alert.style.opacity = '0';
                    setTimeout(() => {
                        alert.remove();
                        if (this.alertCallback) {
                            this.alertCallback();
                            this.alertCallback = null;
                        }
                    }, 300);
                }
            }
            
            showBottomModal(content) {
                const modal = document.getElementById('bottomModal');
                const backdrop = document.getElementById('modalBackdrop');
                
                if (!modal || !backdrop) return;
                
                modal.innerHTML = content;
                
                setTimeout(() => {
                    modal.classList.add('active');
                    backdrop.classList.add('active');
                    document.body.style.overflow = 'hidden';
                }, 10);
            }
            
            closeBottomModal() {
                const modal = document.getElementById('bottomModal');
                const backdrop = document.getElementById('modalBackdrop');
                
                if (!modal || !backdrop) return;
                
                modal.classList.remove('active');
                backdrop.classList.remove('active');
                
                document.body.style.overflow = '';
                
                setTimeout(() => {
                    modal.innerHTML = '';
                    this.currentBooking = {
                        service: null,
                        itemCount: 1,
                        startTime: null,
                        endTime: null,
                        area: null,
                        selectedDate: null,
                        address: '',
                        description: ''
                    };
                }, 300);
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            window.app = new PrimerApp();
        });
    </script>
</body>
</html>